/*
 * Copyright (c) 2021 The ZMK Contributors
 *
 * SPDX-License-Identifier: MIT
 */

#include <dt-bindings/zmk/matrix_transform.h>

/ {
    chosen {
        zmk,kscan = &kscan0;
        zmk,matrix_transform = &default_transform;
    };

default_transform: keymap_transform_0 {
		compatible = "zmk,matrix-transform";
		columns = <10>;
		rows = <4>;
// | SW2  | SW3  | SW4  | SW5  | SW6  |   | SW6  | SW5  | SW4  | SW3  | SW2  |
// | SW8  | SW9  | SW10 | SW11 | SW12 |   | SW12 | SW11 | SW10 | SW9  | SW8  |
// | SW14 | SW15 | SW16 | SW17 | SW18 |   | SW18 | SW17 | SW16 | SW15 | SW14 |
//                      | SW19 | SW20 | SW21 |   | SW21 | SW20 | SW19 |
		map = <
RC(0,1)  RC(0,2)  RC(0,3)  RC(0,4)  RC(0,5)     RC(0,5)   RC(0,4) RC(0,3) RC(0,2) RC(0,1)
RC(1,6)  RC(1,7)  RC(1,8)  RC(1,9)  RC(1,10)    RC(1,10)  RC(1,9) RC(1,8) RC(1,7) RC(1,6)
RC(2,11) RC(2,12) RC(2,13) RC(21,4) RC(2,15)    RC(2,15)  RC(2,14) RC(2,13) RC(2,12) RC(2,11)
                  RC(3,16) RC(3,17) RC(3,18)    RC(3,18)  RC(3,16) RC(3,17)
		>;
	};

	kscan0: kscan {
		compatible = "zmk,kscan-gpio-direct";
		label = "KSCAN";

		input-gpios
			= <&pro_micro 8 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>
			, <&pro_micro 9 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>
			, <&pro_micro 16 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>
			, <&pro_micro 10 (GPIO_ACTIVE_HIGH | GPIO_PULL_DOWN)>
			;
	};
};
